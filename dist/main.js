!function(t){var e={};function i(s){if(e[s])return e[s].exports;var h=e[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var h in t)i.d(s,h,function(e){return t[e]}.bind(null,h));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e){t.exports=function(t){this.sound=document.createElement("audio"),this.sound.src=t,this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.style.display="none",document.body.appendChild(this.sound),this.play=function(){this.sound.play()},this.stop=function(){this.sound.pause()}}},function(t,e,i){const s=i(2);let h=function(t,e,i,s=6,h,o=25,a=25){this.location=t,this.enemyOrientationAngle=e,this.prjImg=i,this.velocity=s,this.game=h,this.radius=a,this.damage=o};h.prototype={run:function(){this.update(),this.draw()},update:function(){this.isOutOfBounds(),this.location.x+=Math.sin(this.enemyOrientationAngle)*this.velocity,this.location.y+=Math.cos(this.enemyOrientationAngle)*this.velocity},draw:function(){this.game.ctx.save(),this.game.ctx.translate(this.location.x,this.location.y),this.game.ctx.rotate(this.enemyOrientationAngle),this.game.ctx.drawImage(this.prjImg,-this.prjImg.width/2,-this.prjImg.height/2),this.game.ctx.restore()},isOutOfBounds:function(){let t=this.game.ctx.canvas.height,e=this.game.ctx.canvas.width;(this.location.x<0||this.location.y<0||this.location.x>e||this.location.y>t)&&this.game.remove("projectile",this)},collided:function(t){let e=this.findDist(t.center,this.location);return this.radius+t.radius>e},collideWith:function(t){return t instanceof s&&(t.health-=this.damage,this.game.remove("projectile",this),!0)},findDist:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},t.exports=h},function(t,e,i){const s=["N","S","E","W"],h=["Daemon","Skeleton","Ogre","Raider","GaronaGriselda","Spider"],o=i(0);function a(t,e,i,s=-10,a=250,r=1,n=25){this.sheetname=h[Math.floor(Math.random()*h.length)],this.board=i,this.character=new Image,this.character.src=`../assets/sprites/${this.sheetname}.png`,this.gridCell,this.dyingSound=new o("../assets/dying.mp3"),this.radius=n,this.x=s,this.y=a,this.srcX,this.srcY,this.sheetWidth,this.sheetHeight,this.cols,this.rows,this.east=2,this.north=0,this.south=4,this.west=2,this.currentFrame=0,this.health=100,this.value=100,this.damage=10,"Skeleton"===this.sheetname?(this.sheetWidth=600,this.sheetHeight=150,this.cols=20,this.rows=5,this.health=100,this.value=100,this.damage=25):"Spider"===this.sheetname?(this.sheetWidth=480,this.sheetHeight=160,this.cols=15,this.rows=5,this.east=2,this.north=0,this.south=4,this.west=2):"Daemon"===this.sheetname?(this.sheetWidth=720,this.sheetHeight=240,this.cols=15,this.rows=5,this.east=2,this.north=0,this.south=4,this.west=2,this.health=500,this.value=400,this.damage=100):"Ogre"===this.sheetname?(this.sheetWidth=720,this.sheetHeight=240,this.cols=15,this.rows=5,this.east=2,this.north=0,this.south=4,this.west=2,this.health=200,this.value=150,this.damage=100):"Raider"===this.sheetname?(this.sheetWidth=720,this.sheetHeight=240,this.cols=15,this.rows=5,this.east=2,this.north=0,this.south=4,this.west=2,this.health=125,this.value=200,this.damage=100):"GaronaGriselda"===this.sheetname&&(this.sheetWidth=600,this.sheetHeight=150,this.cols=20,this.rows=5,this.health=100,this.value=100,this.damage=25),this.speed=Math.floor(5*Math.random()*r+1),this.size=1.25,this.width=this.sheetWidth/this.cols,this.height=this.sheetHeight/this.rows,this.canChangeDirection=!0,this.direction="E",this.currentGridLocation=this.board.grid[0][10],this.currentGridLocationCenterForTakingFire=this.currentGridLocation.center}a.prototype.changeDirection=function(t=s){this.direction=t[Math.floor(Math.random()*t.length)]},a.prototype.setAnimationSheetInfo=function(){"Skeleton"===this.sheetname?(this.sheetWidth=600,this.sheetHeight=150,this.cols=20,this.rows=5):"Spider"===this.sheetname&&(this.sheetWidth=480,this.sheetHeight=160,this.cols=5,this.rows=15,this.east=2,this.north=0,this.south=4)},a.prototype.whichDirection=function(){this.x<-15?this.direction="E":this.x>1180?(this.x=1160,this.direction="W"):this.y>535?this.direction="N":this.y<-30&&(this.direction="S"),this.currentGridLocation.col=Math.floor(this.x/30),this.currentGridLocation.row=Math.floor(this.y/30);let t=this.board.grid[this.currentGridLocation.col][this.currentGridLocation.row].smallestNeighbor;this.currentGridLocation.col<t.j?this.direction="E":this.currentGridLocation.col>t.j?this.direction="W":this.currentGridLocation.row<t.i?this.direction="S":this.currentGridLocation.row>t.i&&(this.direction="N")},a.prototype.getGridCenter=function(t){this.currentGridLocation.col=Math.floor(this.x/30),this.currentGridLocation.row=Math.floor(this.y/30),this.board.grid[this.currentGridLocation.col][this.currentGridLocation.row]&&(this.center=this.board.grid[this.currentGridLocation.col][this.currentGridLocation.row].center)},a.prototype.updateFrame=function(t){switch(this.getGridCenter(),this.characterDead(),this.whichDirection(),this.currentFrame=++this.currentFrame%this.rows,this.srcY=this.currentFrame*this.height,this.direction){case"E":this.srcX=this.width*this.east;break;case"N":this.srcX=this.width*this.north;break;case"S":this.srcX=this.width*this.south;break;case"W":this.srcX=this.width*this.west}"E"===this.direction?this.x+=this.speed:"W"===this.direction?this.x-=this.speed:"N"===this.direction?this.y-=this.speed:"S"===this.direction&&(this.y+=this.speed)},a.prototype.draw=function(t){let e=t.ctx;this.updateFrame(e),"W"===this.direction?(e.save(),e.scale(-1,1),e.drawImage(this.character,this.srcX,this.srcY,this.width,this.height,-this.x,this.y,this.width*this.size,this.height*this.size),e.restore()):e.drawImage(this.character,this.srcX,this.srcY,this.width,this.height,this.x,this.y,this.width*this.size,this.height*this.size)},a.prototype.characterDead=function(){this.board.home.i,this.board.home.j;let t=this.board.home.i,e=this.board.home.j,i=this.currentGridLocation.row,s=this.currentGridLocation.col;t-i<2&&e-s<2&&(this.board.health-=this.damage,this.board.remove("baddy",this)),this.health<1&&(this.board.soundFX&&this.dyingSound.play(),this.board.bank+=this.value,this.board.health+=10,this.board.currentScore+=10,this.board.baddiesDefeated+=1,this.board.remove("baddy",this))},a.prototype.collided=function(t){},a.prototype.collideWith=function(t){return t instanceof Projectile&&(this.health-=50,!0)},t.exports=a},function(t,e,i){const s=i(4),h=i(2),o=i(5),a=(i(1),i(0));let r,n,d,l=Date.now(),c="orcs",u=function(){r=new w(c),window.setTimeout(g,200)};let g=function(){window.requestAnimationFrame(g),n=Date.now(),(d=n-l)>50&&r.gameOn&&(l=n-d%50,r.run())},m={x:-60,y:-60};window.addEventListener("mousemove",t=>{m.x=t.x,m.y=t.y});class w{constructor(t="orcs"){if(this.gameOn=!0,this.soundFX=!0,this.tiles=[],this.towers=[],this.baddies=[],this.projectiles=[],this.grid=[],this.currentScore=0,this.bank=1e3,this.score=0,this.currentHealth=100,this.health=150,this.currWave=0,this.baddiesDefeated=0,this.displayNeedCoins=!1,this.noCoinsFrames=40,this.boardImg=new Image,this.boardImg.src="../assets/sprites/game_board_01.png",this.homeImg=new Image,this.homeImg.src=`../assets/sprites_towers/home_against_${t}.png`,this.waveAmount=5,this.baddiesType=t,this.towerSelected=!1,this.towerSelectors=this.createTowerSelectors(),this.setTowerFunctions(this.towerSelectors),this.createGameStats(this),window.game=this,this.board=document.createElement("canvas"),!this.board||!this.board.getContext)throw"Issues with Canvas or Board";if(this.board.width=1200,this.board.height=600,document.getElementById("canv").appendChild(this.board),this.board.addEventListener("mousemove",this.handleBoardMouseMoved,!1),this.board.addEventListener("mouseover",this.handleBoardMouseOver,!1),this.board.addEventListener("click",this.handleBoardMouseClick,!1),this.board.newSound=new a("../assets/soundTrack.mp3"),this.ctx=this.board.getContext("2d"),!this.ctx)throw"invalid context";this.cellWidth=30,this.gridCols=this.board.width/this.cellWidth,this.gridRows=this.board.height/this.cellWidth,this.playMusic=this.playMusic.bind(this),this.createGrid(),this.playMusic()}run(){"sound-div-off"===document.getElementById("sound-div").className&&this.board.newSound.stop(),"sound-div-on"===document.getElementById("sound-div").className&&this.board.newSound.play(),this.health<1&&this.gameOver(),this.updateStats(),this.render(this.ctx),this.collisionDetection(),this.baddies.length<1&&this.endOfRoundLogic()}render(t){t.clearRect(0,0,this.board.width,this.board.height),t.drawImage(this.boardImg,0,0,this.board.width,this.board.height,0,0,this.board.width,this.board.height),t.drawImage(this.homeImg,1100,255);for(let t=0;t<this.baddies.length;t++){this.baddies[t].draw(this)}for(let t=0;t<this.towers.length;t++){this.towers[t].run(this)}for(let t=0;t<this.projectiles.length;t++){this.projectiles[t].run(this)}this.displayNeedCoins&&(t.font="60px Yeon Sung",t.fillStyle="red",t.textAlign="center",t.fillText("Need More Coins!",this.board.width/2,this.board.height/2))}playMusic(){}getBank(){return this.bank}collisionDetection(){for(let t=0;t<this.projectiles.length;t++)for(let e=0;e<this.baddies.length;e++){let i=this.projectiles[t],s=this.baddies[e];if(i.collided(s)){return i.collideWith(s)}}}setTowerFunctions(t){t.forEach((t,e)=>{t.addEventListener("mouseover",this.selectorHoverOn,!1),t.addEventListener("mouseout",this.selectorHoverOff,!1),t.addEventListener("mousedown",this.selectorPressed,!1),t.addEventListener("click",this.selectorClick,!1)})}selectorHoverOn(){this.style.backgroundImage="radial-gradient(green, brown)"}selectorHoverOff(){this.style.backgroundImage="radial-gradient(brown, green)"}selectorPressed(){this.style.backgroundColor="Red"}selectorClick(){this.style.backgroundColor="green",!0!==r.towerSelected&&(r.getBank()>=this.cost?(r.createTower(this),r.towerSelected=!0):(r.displayNeedCoins=!0,setTimeout(()=>{r.displayNeedCoins=!1},1e3)))}createTower(t){let e=new s(t.cost,t.tImage,t.bImage,r);e?this.towers.push(e):console.log("there was a problem with tower")}createTowerSelectors(){let t=[];for(let e=0;e<5;e++){let i=document.createElement("div"),s=`../assets/sprites_towers/tower_against_${this.baddiesType}_0${e+1}.png`,h=`../assets/sprites_bullets/B${e+1}.png`;i.tImage=new Image,i.tImage.addEventListener("load",this.hideImgElement,!1),i.tImage.addEventListener("error",()=>{console.log("fail tower")},!1),i.tImage.src=s,i.bImage=new Image,i.bImage.addEventListener("load",this.hideImgElement,!1),i.bImage.addEventListener("error",()=>{console.log("fail bullet")},!1),i.bImage.src=h,document.getElementById("playables").append(i),i.cost=250*e*5+50,i.id="tSel"+e,i.style.cursor="url(../assets/hammer.png),pointer",i.className="tower-selector",t.push(i);let o=`../assets/sprites_towers/tower_against_${this.baddiesType}_0${e+1}.png`,a=new Image;a.addEventListener("error",()=>{console.log("fail selector")},!1),a.src=o,i.appendChild(a);let r=document.createTextNode(`${i.cost}`),n=document.createElement("div");n.className="costs-divs",n.append(r),document.getElementById(`${i.id}`).appendChild(n)}return t}createGameStats(t){let e=document.createElement("div");e.id="fx-div",e.className="fx-div-on",document.getElementById("stats").append(e),document.getElementById("fx-div").addEventListener("click",function(){document.getElementById("fx-div").className="fx-div-on"===document.getElementById("fx-div").className?"fx-div-off":"fx-div-on",t.soundFX=!t.soundFX});let i,s,h=["health","bank","wave","enemiesLeft","total-killed"];for(let t=0;t<5;t++){switch(h[t]){case"health":s=document.createTextNode("Health"),i=this.health;break;case"bank":s=document.createTextNode("Bank"),i=this.bank;break;case"wave":s=document.createTextNode("Wave"),i=this.currWave;break;case"enemiesLeft":s=document.createTextNode("Enemies"),i=this.baddies.length;break;case"total-killed":s=document.createTextNode("Dead"),i=this.baddiesDefeated}let e=document.createElement("div");e.append(s),e.append(document.createElement("BR")),e.append(i);document.createElement("div");e.className="sound-div",e.className="stats-divs",e.id=h[t],document.getElementById("stats").append(e)}return[]}updateStats(){let t=document.getElementById("stats").getElementsByClassName("stats-divs");for(let e=0;e<t.length;e++){const i=t[e];switch(i.id){case"health":i.innerHTML=`Health<br>${this.health}`;break;case"bank":r.displayNeedCoins?(i.style.color="red",i.innerHTML=`Bank<br>${this.bank}`):(i.style.color="wheat",i.innerHTML=`Bank<br>${this.bank}`);break;case"wave":i.innerHTML=`Wave<br>${this.currWave}`;break;case"enemiesLeft":i.innerHTML=`Enemies<br>${this.baddies.length}`;break;case"total-killed":i.innerHTML=`Dead<br>${this.baddiesDefeated}`}}}handleBoardMouseMoved(t){r.mouseX=t.offsetX,r.mouseY=t.offsetY,this.mouseX=t.offsetX,this.mouseY=t.offsetY,r.towers.length<1||r.towers[r.towers.length-1].placed||!0!==r.towerSelected||(r.towers[r.towers.length-1].location.y=this.mouseY,r.towers[r.towers.length-1].location.x=this.mouseX)}handleBoardMouseOver(){r.towers.length<1||(r.towers[r.towers.length-1].shouldDraw=!0)}handleBoardMouseClick(t){let e=Math.floor(t.offsetY/r.cellWidth),i=Math.floor(t.offsetX/r.cellWidth),s=r.grid[i][e];r.towerSelected&&r.nodeAvailable(s)?(r.putTower(s),r.bank-=r.towers[r.towers.length-1].cost):r.towerSelected||s.hasTower||(!s.wall&&r.getBank()>=r.wallVal?(r.bank-=r.wallVal,s.wall=!0):s.wall&&(r.bank+=r.wallVal,s.wall=!1))}nodeAvailable(t){if(r.towerSelected)return!t.wall&&!t.isTower&&t!=r.home}putTower(t){r.towers[r.towers.length-1].location={x:t.j*this.cellWidth+this.cellWidth/2,y:t.i*this.cellWidth+this.cellWidth/2},r.towers[r.towers.length-1].placed=!0,t.isTower=!0,r.towerSelected=!1}createGrid(){let t=0;for(let e=0;e<this.gridCols;e++){this.grid.push([]);for(let i=0;i<this.gridRows;i++)this.grid[e].push(new o(this,++t,e,i))}for(let t=0;t<this.gridCols;t++)for(let e=0;e<this.gridRows;e++)this.grid[t][e].addNeighbors();this.home=this.grid[this.gridCols-1][this.gridRows/2],this.home.wall=!1,this.home.pathScore=0,this.createPaths()}getGridLocationCEnter(t,e){}createPaths(){let t=[this.home];for(;t.length>0;){let e=t.shift();e.neighbors.forEach(i=>{-1===i.pathScore&&(t.push(i),i.pathScore=e.pathScore+30)})}for(let t=0;t<this.gridCols;t++)for(let e=0;e<this.gridRows;e++)this.grid[t][e].wall||this.grid[t][e].getLeastNeighborPath()}endOfRoundLogic(){this.waveAmount=Math.floor(1.2*this.waveAmount),this.currWave+=1,this.generateNextWave()}generateNextWave(){this.board.newSound.stop(),"sound-div-on"===document.getElementById("sound-div").className&&this.board.newSound.play();for(let t=0;t<this.waveAmount;t++){let t=0,e=Math.floor(600*Math.random()),i=new h(0,0,this,t,e);this.baddies.push(i)}}remove(t,e){"projectile"===t?this.projectiles.splice(this.projectiles.indexOf(e),1):"baddy"===t&&this.baddies.splice(this.baddies.indexOf(e),1)}gameOver(){r.gameOn=!1,document.getElementById("game-on").style.display="none",document.getElementById("end-modal").style.display="block"}}window.addEventListener("load",function(){document.getElementById("start-game").addEventListener("click",function(){document.getElementById("game-modal").style.display="none",window.setTimeout(u,100)}),document.getElementById("human").addEventListener("click",function(){c="orcs"}),document.getElementById("sound-div").addEventListener("click",function(){document.getElementById("sound-div").className="sound-div-on"===document.getElementById("sound-div").className?"sound-div-off":"sound-div-on"})},!1)},function(t,e,i){const s=i(1),h=i(0);t.exports=class{constructor(t,e,i,s,o={x:600,y:300},a=300){this.game=s,this.cost=t,this.image=e,this.projectileImg=i,this.location=o,this.enemyOrientationAngle=0,this.baddies=s.baddies,this.placed=!1,this.shouldDraw=!1,this.firingRange=a,this.projectileSpeed=30,this.shootSound=new h("../assets/arrow.mp3"),this.lastFired=Date.now(),this.reloadTime=500,this.damage=t,this.shoot=this.shoot.bind(this)}checkForBaddies(t){let e=this.location.x-t.x,i=this.location.y-t.y,s=Math.sqrt(Math.pow(e,2)+Math.pow(i,2));Date.now()-this.reloadTime>this.lastFired&&s<=this.firingRange&&this.placed&&(this.shoot(),this.shootSound.play(),this.lastFired=Date.now())}shoot(){let t=new s({x:this.location.x,y:this.location.y},this.enemyOrientationAngle,this.projectileImg,this.projectileSpeed,this.game,this.damage);this.game.projectiles.push(t)}run(){this.update(),this.draw()}update(){let t,e;if(this.baddy=this.findBaddy(),this.baddy){t=this.location.x-this.baddy.center.x,e=this.location.y-this.baddy.center.y-30,this.target=this.baddy.center,this.enemyOrientationAngle=Math.atan2(t,e)-Math.PI;let i=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));Date.now()-this.reloadTime>this.lastFired&&i<=this.firingRange&&this.placed&&(this.game.soundFX&&this.shootSound.play(),this.shoot(),this.lastFired=Date.now())}else t=this.location.x-this.game.mouseX,e=this.location.y-this.game.mouseY,this.enemyOrientationAngle=Math.atan2(t,e)-Math.PI}draw(){this.game.ctx.save(),this.game.ctx.translate(this.location.x,this.location.y),this.shouldDraw&&this.game.ctx.drawImage(this.image,-this.image.width/2,-this.image.height/2),this.game.ctx.restore()}findDist(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}findBaddy(){for(let t=0;t<this.baddies.length;t++){let e=this.baddies[t];if(this.findDist(e.center,this.location)<this.firingRange)return this.baddies[t]}}}},function(t,e){const i=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,30,31,32,33,34,35,36,37,40,41,50,51,52,56,57,60,61,70,71,76,77,80,81,90,91,96,97,100,101,110,111,116,117,120,121,130,131,136,137,140,141,150,151,156,157,160,161,170,171,176,177,180,181,190,191,196,197,200,201,210,211,216,217,218,219,220,221,230,231,236,237,238,239,240,241,250,251,260,261,262,263,264,265,266,267,268,269,270,271,280,281,290,300,301,310,311,312,313,314,315,316,317,318,319,320,321,330,334,335,340,341,350,354,355,360,361,362,363,364,365,366,367,368,369,370,374,375,380,381,390,394,395,400,401,410,414,415,420,421,430,434,435,440,441,442,443,444,445,446,447,448,449,450,454,455,460,461,462,463,464,465,466,467,468,469,470,474,475,480,481,490,494,495,500,501,510,514,515,520,521,530,534,535,540,541,542,543,544,545,546,547,548,549,550,554,555,560,561,570,574,575,580,581,590,594,595,600,601,610,614,615,620,621,630,634,635,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,670,679,680,681,682,683,684,685,686,687,688,689,690,699,700,701,702,710,719,720,721,722,730,739,740,741,750,751,752,753,754,755,756,757,758,759,760,761,770,781,790];function s(t,e,s,h){this.id=e,this.board=t,this.cellWidth=this.board.cellWidth,this.location={x:s*this.cellWidth,y:h*this.cellWidth},this.center={x:this.location.x+.5*this.cellWidth,y:this.location.y+.5*this.cellWidth},this.parentNode="",this.context=this.board.ctx,this.i=h,this.j=s,this.f=0,this.g=0,this.h=0,this.neighbors=[],this.smallestNeighbor,this.directionFromNearestNeighbor="E",this.previous=void 0,this.shortestPath=[],i.includes(this.id)?this.walkingPath=!0:this.walkingPath=!1,this.wall=!1,this.startingArea=!1,this.isTower=!1,this.pathScore=-1,this.nodeAvailable=!0}s.prototype.addNeighbors=function(){let t=this.j,e=this.i,i=this.board.grid;e>0&&!this.wall&&!i[t][e-1].wall&&this.neighbors.push(i[t][e-1]),t<i.length-1&&!this.wall&&!i[t+1][e].wall&&this.neighbors.push(i[t+1][e]),e<i[t].length-1&&!this.wall&&!i[t][e+1].wall&&this.neighbors.push(i[t][e+1]),t>0&&!this.wall&&!i[t-1][e].wall&&this.neighbors.push(i[t-1][e])},s.prototype.render=function(){this.wall?this.context.fillStyle="#8c1d35":this.context.fillStyle="rgba(66,245,179, 0.25)",this.context.strokeStyle="#2e5244",this.context.fillRect(this.location.x,this.location.y,this.cellWidth,this.cellWidth),this.context.strokeRect(this.location.x,this.location.y,this.cellWidth,this.cellWidth),this.context.font="10px Arial",this.context.fillStyle="#000000",this.context.fillText(this.pathScore,this.location.x+5,this.location.y+15)},s.prototype.getLeastNeighborPath=function(){let t=64e3;this.neighbors.forEach((e,i)=>{e.pathScore<t&&(t=e.pathScore,this.smallestIdx=i)}),this.smallestNeighbor=this.neighbors[this.smallestIdx]},t.exports=s}]);